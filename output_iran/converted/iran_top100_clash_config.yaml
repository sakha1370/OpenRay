# Recommended Clash Meta configuration for Iran - anti-DNS hijack, fake-ip, auto rule-providers, robust region rules

mixed-port: 7892
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
ipv6: false

external-controller: 0.0.0.0:9090
external-ui: ui
external-ui-url: 
  https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip
secret: ''

# Performance Settings
unified-delay: false
tcp-concurrent: true
find-process-mode: strict

# Profile Settings
profile:
  store-selected: true
  store-fake-ip: true

# TUN Configuration for Iran
tun:
  enable: true
  stack: system
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  dns-hijack:
  - any:53
  - tcp://any:53
  device: utun0
  mtu: 9000
  strict-route: true
  gso: true
  gso-max-size: 65536

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
  - '*.lan'
  - '*.local'
  - '*.ir'
  - +.aparat.com
  - +.rubika.ir
  - +.digikala.com
  - +.eitaa.com
  - +.telewebion.ir
  - +.snapp.ir
  - +.shad.ir
  - +.zarinpal.com
  - +.parsian.com
  - +.mellat.ir
  - +.bmi.ir
  - +.postbank.ir
  - +.shetab.ir
  - +.sep.ir
  - +.irna.ir
  - +.isna.ir
  use-hosts: true
  use-system-hosts: false
  respect-rules: true
  default-nameserver:
  - tls://1.1.1.1:853
  - tls://9.9.9.9:853
  nameserver:
  - https://cloudflare-dns.com/dns-query
  - https://dns.google/dns-query
  - https://9.9.9.9/dns-query
  proxy-server-nameserver:
  - https://cloudflare-dns.com/dns-query
  - 1.1.1.1

proxies:
- name: OpenRay  US-931
  type: vless
  server: 185.236.232.148
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-1327
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-2463
  type: vless
  server: 185.236.232.199
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-2576
  type: vless
  server: 185.236.232.148
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  CA-2963
  type: vless
  server: 104.21.3.207
  port: 8880
  uuid: 2a2f8790-99ab-4788-985c-0fe5627af2a9
  network: ws
  ws-opts:
    path: 
      Telegram-EiV2Ray-Telegram-EiV2Ray-Telegram-EiV2Ray-Telegram-EiV2Ray-Telegram-EiV2Ray-Telegram-EiV2Ray
    headers:
      Host: SomeNotificationsChangeYourLife.EiNetwork.News.
- name: OpenRay  CA-2984
  type: vless
  server: 162.159.40.111
  port: 8880
  uuid: 2a2f8790-99ab-4788-985c-0fe5627af2a9
  network: ws
  ws-opts:
    path: 
      Telegram-EiV2Ray-Telegram-EiV2Ray-Telegram-EiV2Ray-Telegram-EiV2Ray-Telegram-EiV2Ray-Telegram-EiV2Ray
    headers:
      Host: SomeNotificationsChangeYourLife.EiNetwork.News.
- name: OpenRay  US-3823
  type: vless
  server: 185.236.232.199
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-4795
  type: vless
  server: 185.236.232.148
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-5032
  type: vless
  server: 185.236.232.199
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-5172
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-5671
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-5862
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-5883
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-5886
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-5935
  type: vless
  server: 185.236.232.72
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-6563
  type: vless
  server: 185.236.232.199
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-7022
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-7094
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-7095
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-7343
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-7974
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-8193
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-8516
  type: vless
  server: 185.236.232.148
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-9279
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-9280
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-9283
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-9307
  type: vless
  server: 185.236.232.148
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10149
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10151
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10174
  type: vless
  server: 185.236.232.148
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10175
  type: vless
  server: 185.236.232.148
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10183
  type: vless
  server: 185.236.232.199
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10348
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10352
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10377
  type: vless
  server: 185.236.232.199
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10450
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10627
  type: vless
  server: 185.236.232.199
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10644
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10645
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10648
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10649
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10675
  type: vless
  server: 185.236.232.148
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10814
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10819
  type: vless
  server: 185.236.232.116
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc
- name: OpenRay  US-10875
  type: vless
  server: 185.236.232.199
  port: 8880
  uuid: e4824193-4f54-453b-d037-88368e85ef0e
  network: grpc

proxy-groups:
- name: AUTO
  type: url-test
  url: https://www.gstatic.com/generate_204
  interval: 300
  tolerance: 50
  proxies:
  - OpenRay  US-931
  - OpenRay  US-1327
  - OpenRay  US-2463
  - OpenRay  US-2576
  - OpenRay  CA-2963
  - OpenRay  CA-2984
  - OpenRay  US-3823
  - OpenRay  US-4795
  - OpenRay  US-5032
  - OpenRay  US-5172
  - OpenRay  US-5671
  - OpenRay  US-5862
  - OpenRay  US-5883
  - OpenRay  US-5886
  - OpenRay  US-5935
  - OpenRay  US-6563
  - OpenRay  US-7022
  - OpenRay  US-7094
  - OpenRay  US-7095
  - OpenRay  US-7343
  - OpenRay  US-7974
  - OpenRay  US-8193
  - OpenRay  US-8516
  - OpenRay  US-9279
  - OpenRay  US-9280
  - OpenRay  US-9283
  - OpenRay  US-9307
  - OpenRay  US-10149
  - OpenRay  US-10151
  - OpenRay  US-10174
  - OpenRay  US-10175
  - OpenRay  US-10183
  - OpenRay  US-10348
  - OpenRay  US-10352
  - OpenRay  US-10377
  - OpenRay  US-10450
  - OpenRay  US-10627
  - OpenRay  US-10644
  - OpenRay  US-10645
  - OpenRay  US-10648
  - OpenRay  US-10649
  - OpenRay  US-10675
  - OpenRay  US-10814
  - OpenRay  US-10819
  - OpenRay  US-10875
- name: PROXY
  type: select
  proxies:
  - AUTO
  - OpenRay  US-931
  - OpenRay  US-1327
  - OpenRay  US-2463
  - OpenRay  US-2576
  - OpenRay  CA-2963
  - OpenRay  CA-2984
  - OpenRay  US-3823
  - OpenRay  US-4795
  - OpenRay  US-5032
  - OpenRay  US-5172
  - OpenRay  US-5671
  - OpenRay  US-5862
  - OpenRay  US-5883
  - OpenRay  US-5886
  - OpenRay  US-5935
  - OpenRay  US-6563
  - OpenRay  US-7022
  - OpenRay  US-7094
  - OpenRay  US-7095
  - OpenRay  US-7343
  - OpenRay  US-7974
  - OpenRay  US-8193
  - OpenRay  US-8516
  - OpenRay  US-9279
  - OpenRay  US-9280
  - OpenRay  US-9283
  - OpenRay  US-9307
  - OpenRay  US-10149
  - OpenRay  US-10151
  - OpenRay  US-10174
  - OpenRay  US-10175
  - OpenRay  US-10183
  - OpenRay  US-10348
  - OpenRay  US-10352
  - OpenRay  US-10377
  - OpenRay  US-10450
  - OpenRay  US-10627
  - OpenRay  US-10644
  - OpenRay  US-10645
  - OpenRay  US-10648
  - OpenRay  US-10649
  - OpenRay  US-10675
  - OpenRay  US-10814
  - OpenRay  US-10819
  - OpenRay  US-10875
rules:
- DOMAIN-SUFFIX,ir,DIRECT
- DOMAIN-SUFFIX,aparat.com,DIRECT
- DOMAIN-SUFFIX,digikala.com,DIRECT
- DOMAIN-SUFFIX,divar.ir,DIRECT
- DOMAIN-SUFFIX,eitaa.com,DIRECT
- DOMAIN-SUFFIX,rubika.ir,DIRECT
- DOMAIN-SUFFIX,snapp.ir,DIRECT
- DOMAIN-SUFFIX,zarinpal.com,DIRECT
- DOMAIN-SUFFIX,parsian.com,DIRECT
- DOMAIN-SUFFIX,mellat.ir,DIRECT
- DOMAIN-SUFFIX,bmi.ir,DIRECT
- DOMAIN-SUFFIX,postbank.ir,DIRECT
- DOMAIN-SUFFIX,shetab.ir,DIRECT
- DOMAIN-SUFFIX,sep.ir,DIRECT
- DOMAIN-SUFFIX,irna.ir,DIRECT
- DOMAIN-SUFFIX,isna.ir,DIRECT
- GEOSITE,GOOGLE,PROXY
- GEOSITE,YOUTUBE,PROXY
- GEOSITE,FACEBOOK,PROXY
- GEOSITE,INSTAGRAM,PROXY
- GEOSITE,TWITTER,PROXY
- GEOSITE,TELEGRAM,PROXY
- GEOSITE,GITHUB,PROXY
- GEOSITE,CLOUDFLARE,PROXY
- GEOSITE,NETFLIX,PROXY
- GEOSITE,SPOTIFY,PROXY
- GEOSITE,CATEGORY-ADS-ALL,REJECT
- GEOSITE,GEOLOCATION-!CN,PROXY
- GEOIP,PRIVATE,DIRECT
- MATCH,PROXY
hosts:
  dns.google: [8.8.8.8, 8.8.4.4]
  cloudflare-dns.com: [1.1.1.1, 1.0.0.1]
  1dot1dot1dot1.cloudflare-dns.com: [1.1.1.1, 1.0.0.1]
  www.google.com: [142.250.191.36]
  youtube.com: [142.250.191.14]
  www.youtube.com: [142.250.191.14]
  facebook.com: [157.240.11.35]
  www.facebook.com: [157.240.11.35]
  twitter.com: [104.244.42.193]
  www.twitter.com: [104.244.42.193]
  x.com: [104.244.42.193]
